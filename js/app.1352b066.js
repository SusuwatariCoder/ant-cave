(function(e){function t(t){for(var o,s,c=t[0],l=t[1],i=t[2],d=0,f=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={app:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/ant-cave/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=l;r.push([10,"chunk-vendors"]),n()})({0:function(e,t){},"034f":function(e,t,n){"use strict";var o=n("85ec"),a=n.n(o);a.a},"047f":function(e,t,n){"use strict";var o=n("ab35"),a=n.n(o);a.a},"0c30":function(e,t,n){"use strict";var o=n("3d5a"),a=n.n(o);a.a},1:function(e,t){},10:function(e,t,n){e.exports=n("56d7")},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},"17e4":function(e,t,n){},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},25:function(e,t){},26:function(e,t){},27:function(e,t){},28:function(e,t){},29:function(e,t){},3:function(e,t){},30:function(e,t){},31:function(e,t){},32:function(e,t){},"32bc":function(e,t,n){},33:function(e,t){},34:function(e,t){},3415:function(e,t,n){"use strict";var o=n("32bc"),a=n.n(o);a.a},35:function(e,t){},36:function(e,t){},37:function(e,t){},38:function(e,t){},39:function(e,t){},"3d5a":function(e,t,n){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navh",{on:{userAddress:e.getUserAddress}}),n("WordCloud",{attrs:{address:e.address}}),n("footPicture")],1)},r=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"nav"},[o("ul",[o("img",{attrs:{src:n("88f6"),alt:"#"}}),o("a",{directives:[{name:"show",rawName:"v-show",value:e.protocol,expression:"protocol"}],attrs:{href:"https://ant-cave.vercel.app/"}},[e._v(" (由于安全协议，请点击跳转线上版本) ")]),o("p",{staticClass:"yi"},[e._v("蚁穴")]),o("li",{staticClass:"login",on:{click:e.login}},[0==e.logined?o("a",{staticClass:"el-icon-s-home",attrs:{href:"#"}},[e._v(e._s(e.loginText))]):o("a",{staticClass:"el-icon-s-home",attrs:{href:"#"}},[e._v(e._s(e.addressText)+" ")])]),o("li",{staticClass:"Registration",on:{click:e.create}},[0==e.logined?o("a",{staticClass:"el-icon-edit",attrs:{href:"#"}},[e._v(" 创建身份 ")]):o("a",{staticClass:"el-icon-edit",attrs:{href:"#"}},[e._v("网络: "+e._s(e.network))])])])])},c=[],l=(n("96cf"),n("1da1")),i=n("1d81"),u=n.n(i),d={data:function(){return{address:"未登录",addressText:"未登录",loginText:"钱包登录",network:"未连接",logined:!1,protocol:!0}},created:function(){this.connect(),"http:"==window.location.protocol?this.protocol=!0:this.protocol=!1},methods:{connect:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:n=t.sent,console.log("获得地址",n[0]),e.address=n[0],e.addressText=e.address.substring(0,4)+"..."+e.address.substring(e.address.length-6),e.loginText="已登录",e.getNet(),e.logined=!0,e.sendDataToParent();case 10:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connect(),t.next=3,u.a.openBox(e.address,window.ethereum);case 3:e.box=t.sent,e.box.syncDone,console.log(e.box);case 6:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connect(),t.next=3,u.a.openBox(e.address,window.ethereum);case 3:e.box=t.sent,e.box.syncDone,console.log(e.box);case 6:case"end":return t.stop()}}),t)})))()},getNet:function(){var e=window.ethereum.chainId;console.log(e),"0x1"==e?this.network="以太坊主网":"0x2"==e?this.network="Expanse mainnet":"0x3"==e||"0x3"==e?this.network="Ropsten 测试网":"0x4"==e?this.network="Rinkeby 测试网":"0x5"==e?this.network="Goerli 测试网":"0x2a"==e&&(this.network="Kovan 测试网")},sendDataToParent:function(){this.$emit("userAddress",this.address)}}},f=d,p=(n("047f"),n("2877")),m=Object(p["a"])(f,s,c,!1,null,"36952363",null),g=m.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"bot"},[n("NewData",{attrs:{address:e.address}})],1),n("div",{staticClass:"wordcloud"},[n("wordcloud",{attrs:{data:e.defaultWords,color:"Accent",top:"30px",right:"30px",bottom:"30px",left:"30px",showTooltip:!1,wordClick:e.wordClickHandler}})],1),n("div",[n("ShowContent",{attrs:{tableData:e.tableData}})],1)])},b=[],w=n("9b23"),v=n.n(w),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-box"},[n("el-table",{staticClass:"table",staticStyle:{width:"50 !important"},attrs:{data:e.tableData,stripe:"",border:"",width:"0%","header-cell-style":{"text-align":"center","border-top":"3px solid rgb(16, 217, 243)","padding-bottom":"1px"},"cell-style":{"text-align":"center","padding-bottom":"1px"}}},[n("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),n("el-table-column",{attrs:{prop:"tag",label:"标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.tag))])],1)]}}])}),n("el-table-column",{attrs:{width:"50",prop:"cent",label:"评分"}}),n("el-table-column",{attrs:{prop:"url",label:"网址"}}),n("el-table-column",{attrs:{prop:"url",label:"查看"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v("访问")])]}}])})],1)],1)},k=[],y={name:"ShowContent",props:["tableData"],methods:{handleClick:function(e){console.log(e.url),window.open(e.url,"_blank")}},data:function(){return{tableData2:[{name:"鸠摩搜索",tag:"搜索引擎",cent:"-",url:"https://www.jiumodiary.com/"},{name:"多吉搜索",tag:"搜索引擎",cent:"-",url:"https://www.dogedoge.com/"},{name:"盘搜",tag:"搜索引擎",cent:"-",url:"http://www.pansou.com/"},{name:"茶杯狐",tag:"搜索引擎",cent:"-",url:"https://www.cupfox.com/"}]}}},C=y,D=(n("3415"),Object(p["a"])(C,x,k,!1,null,"65859bca",null)),_=D.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cov"},[n("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"100px"}},[n("el-form-item",{attrs:{label:"网站名称",prop:"name"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.webName,callback:function(t){e.$set(e.ruleForm,"webName",t)},expression:"ruleForm.webName"}})],1),n("el-form-item",{attrs:{label:"网站地址",prop:"url"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.webUrl,callback:function(t){e.$set(e.ruleForm,"webUrl",t)},expression:"ruleForm.webUrl"}})],1),n("el-form-item",{attrs:{label:"网站标签",prop:"tag"}},[n("el-input",{model:{value:e.ruleForm.webTag,callback:function(t){e.$set(e.ruleForm,"webTag",t)},expression:"ruleForm.webTag"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),n("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("贡献数据")])],1)],1)},T=[],O={data:function(){return{ruleForm:{webName:"",webUrl:"",webTag:""},loading:!1}},props:["address"],methods:{submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){if(!e)return console.log("提交出错！"),t.loading=!1,!1;console.log("网站",t.ruleForm.webName),console.log("网址",t.ruleForm.webUrl),console.log("标签",t.ruleForm.webTag);var n=t.ruleForm.webTag,o=t.ruleForm.webName,a=t.ruleForm.webUrl;t.SaveTo3Box(n,o,a),t.$message({showClose:!0,message:"写入比较慢，请等待提交!",type:"warning"})}))},resetForm:function(){console.log("重置"),this.ruleForm.webName="",this.ruleForm.webUrl="",this.ruleForm.webTag=""},SaveTo3Box:function(e,t,n){var o=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o.SaveTag3Box(e),r="0x7F9d6ba73aD4c7B239c771C9EAcC5F4E4f13baCE",console.log("account: "+r),a.next=5,u.a.openBox(r,window.ethereum);case 5:return s=a.sent,s.syncDone,console.log("Opening space: "+e),a.next=10,s.openSpace(e);case 10:return c=a.sent,a.next=13,c.syncDone;case 13:return console.log("Opened"),console.log("Saving..."),a.next=17,c.public.set(t,n);case 17:console.log("Saved"),console.log("space",c),o.ReadFrom3Box(e),console.log("提交成功！"),o.loading=!1,o.$message({showClose:!0,message:"提交成功！",type:"success"});case 23:case"end":return a.stop()}}),a)})))()},SaveTag3Box:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="0x7F9d6ba73aD4c7B239c771C9EAcC5F4E4f13baCE",t.next=3,u.a.openBox(n,window.ethereum);case 3:return o=t.sent,t.next=6,o.openSpace("tags");case 6:return a=t.sent,console.log("newTage",e),console.log("Tag space",a),t.next=11,a.syncDone;case 11:return console.log("Opened Tag"),console.log("Saving Tag..."),t.next=15,a.public.set(e,"0");case 15:console.log("Saved");case 16:case"end":return t.stop()}}),t)})))()},ReadFrom3Box:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,u.a.getSpace(t.address,e);case 2:return o=n.sent,console.log(o),n.next=6,u.a.openBox(t.address,window.ethereum);case 6:a=n.sent,a.syncDone,console.log(a);case 9:case"end":return n.stop()}}),n)})))()}}},B=O,S=(n("8e14"),Object(p["a"])(B,F,T,!1,null,"31dad9e1",null)),j=S.exports,R={name:"WordCloud",components:{wordcloud:v.a,ShowContent:_,NewData:j},created:function(){var e=this;this.ReadFrom3BoxByTag("tags").then((function(t){e.allTags=t,console.log("获取全部tags",e.allTags),e.changeTagWords()}))},methods:{addNewData:function(){0==this.addDataBlock?(this.addDataBlock=!0,this.addData="关闭"):(this.addDataBlock=!1,this.addData="贡献数据")},wordClickHandler:function(e,t,n){var o=this;this.ReadFrom3BoxByTag(e).then((function(a){o.allData=a,console.log("wordClickHandler",e,t,n),console.log("allData",o.allData),o.changeAllData(e)}))},ReadFrom3BoxByTag:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="0x7F9d6ba73aD4c7B239c771C9EAcC5F4E4f13baCE",t.next=3,u.a.getSpace(n,e);case 3:return o=t.sent,console.log(o),t.next=7,u.a.openBox(n,window.ethereum);case 7:return a=t.sent,a.syncDone,console.log("read Box",a),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))()},changeTagWords:function(){for(var e in this.defaultWords=[],this.allTags){console.log("oneTag",e);var t={name:e,value:Math.random(0,50)};this.defaultWords.push(t)}console.log("newDefaultWords",this.defaultWords)},changeAllData:function(e){for(var t in this.tableData=[],this.allData){var n={name:t,tag:e,cent:"-",url:this.allData[t]};this.tableData.push(n)}console.log("table-Data",this.tableData)}},props:["address"],data:function(){return{addDataBlock:!1,addData:"贡献数据",myColors:["#1f77b4","#629fc9","#94bedb","#c9e0ef"],allTags:void 0,allData:void 0,tableData:[],defaultWords:[{name:"区块链",value:26},{name:"电影",value:19},{name:"图片",value:18},{name:"搜索引擎",value:15},{name:"游戏",value:9},{name:"编程语言",value:6},{name:"科技",value:9},{name:"以太坊",value:6},{name:"",value:64}]}}},E=R,$=(n("0c30"),Object(p["a"])(E,h,b,!1,null,"47cc5ca9",null)),N=$.exports,A=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},P=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"foot"},[n("a",{attrs:{href:"https://github.com/SusuwatariCoder/ant-cave"}},[e._v("© SusuwatariCoder 2020")])])])}],W={},U=W,M=(n("b116"),Object(p["a"])(U,A,P,!1,null,"5a066a81",null)),H=M.exports,q={name:"App",components:{navh:g,WordCloud:N,footPicture:H},data:function(){return{address:""}},methods:{getUserAddress:function(e){this.address=e,console.log("父组件地址",this.address)}}},z=q,J=(n("034f"),Object(p["a"])(z,a,r,!1,null,null,null)),G=J.exports,I=n("5c96"),K=n.n(I);n("0fae");o["default"].config.productionTip=!1,o["default"].use(K.a),new o["default"]({render:function(e){return e(G)}}).$mount("#app")},"595f":function(e,t,n){},6:function(e,t){},7:function(e,t){},8:function(e,t){},"85ec":function(e,t,n){},"88f6":function(e,t,n){e.exports=n.p+"img/faucet.3d6e3157.gif"},"8e14":function(e,t,n){"use strict";var o=n("595f"),a=n.n(o);a.a},9:function(e,t){},ab35:function(e,t,n){},b116:function(e,t,n){"use strict";var o=n("17e4"),a=n.n(o);a.a}});
//# sourceMappingURL=app.1352b066.js.map